<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="page-title-box">
                    <h4 class="page-title float-left">Taxi Booking Detail</h4>
                    <ol class="breadcrumb float-right">
                        <li class="breadcrumb-item"><a href="javascript:void(0);">Taxi Booking Detail</a></li>
                        <li class="breadcrumb-item active">View Taxi Booking Detail</li>
                    </ol>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card-box">
                    <h4 class="header-title m-t-0">Taxi Booking Detail</h4>
                    <div class="row">
                        <div class="col-sm-3">
                            <div class="text-center card-box">
                                <div class="clearfix"></div>
                                <div class="member-card">
                                    <div class="thumb-xl member-thumb m-b-10 mx-auto">
                                        <img src="<%= data?.user?.image %>" class="rounded-circle img-thumbnail" alt="profile-image">
                                    </div>
                                    <div class="">
                                        <h4 class="m-b-5 font-18"><%= data?.user?.first_name || '' %> <%= data?.user?.last_name || '' %></h4>
                                        <p class="text-muted m-b-0"><span class="text-pink"> <%= data?.user?.email || '' %> </span> </p>
                                        <p class="text-muted"> <%= data?.user?.country_code +' '+ data?.user?.mobile_no || '' %> </p>
                                    </div>
                                    <p class="text-muted font-13"> <%= data?.user?.city || '' %>, <%= data?.user?.state || '' %>, <%= data?.user?.country || '' %> </p>
                                    <b>USER</b>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-9">
                            <h5 class="text-custom m-b-5"> TAXI BOOKING DETAIL </h5>
                            <h4 class="header-title m-t-0">Taxi Registration Number: <span class="font-13"><%= data?.driver?.taxi_driver_business_detail?.registration_no %></span></h4>
                            <h4 class="header-title m-t-0">Price: <span class="font-13"><%= data.price %> (INR)</span></h4>
                            <h4 class="header-title m-t-0">Total Price: <span class="font-13"><%= data.total_price %> (INR)</span></h4>
                            <h4 class="header-title m-t-0">Start Date & Time: <span class="font-13"><%= data.start_date_time %></span></h4>
                            <h4 class="header-title m-t-0">Pickup Latitude: <span class="font-13"><%= data.pickup_latitude %></span></h4>
                            <h4 class="header-title m-t-0">Pickup Longitude: <span class="font-13"><%= data.pickup_longitude %></span></h4>
                            <h4 class="header-title m-t-0">Pickup Location: <span class="font-13"><%= data.pickup_location %></span></h4>
                            <h4 class="header-title m-t-0">Drop Latitude: <span class="font-13"><%= data.drop_latitude %></span></h4>
                            <h4 class="header-title m-t-0">Drop Longitude: <span class="font-13"><%= data.drop_longitude %></span></h4>
                            <h4 class="header-title m-t-0">Drop Location: <span class="font-13"><%= data.drop_location %></span></h4>
                            <h4 class="header-title m-t-0">Status: <span class="font-13"><%= data.status == '1' ? 'pending' : data.status == '2' ? 'in-progress' : data.status == '3' ? 'abandoned' : data.status == '4' ? 'completed' : 'cancelled' %></span></h4>
                            <h4 class="header-title m-t-0">Created At: <span class="font-13"><%= data?.createdAt %></span></h4>
                        </div>
                    </div>
                    <hr>

                    <div class="col-lg-12 mt-4">
                        <h5 class="text-custom m-b-5"> TAXI BOOKING PAYMENT & TRANSACTIONS</h5>
                        
                        <%if (data?.booking_payment?.transactions?.length) { %>
                            <h4 class="header-title m-t-0">Total Price: <span class="font-13"><%= data?.booking_payment?.total_price %> (<%= data?.booking_payment?.currency %>)</span></h4>
                            <% data.booking_payment.transactions.forEach((v, k) => { %>
                                <div class="card-box">
                                    <h4 class="header-title m-t-0">Transaction Payment Ref: <span class="font-13"><%= v.transaction_payment_ref %></span></h4>
                                    <h4 class="header-title m-t-0">Transaction Refund Ref: <span class="font-13"><%= v.transaction_refund_ref || 'Null' %></span></h4>
                                    <h4 class="header-title m-t-0">Entity: <span class="font-13"><%= v.entity %></span></h4>
                                    <h4 class="header-title m-t-0">Amount: <span class="font-13"><%= v.amount %> (<%= v.currency %>)</span></h4>
                                    <h4 class="header-title m-t-0">Method: <span class="font-13"><%= v.method %></span></h4>
                                    <h4 class="header-title m-t-0">Status: <span class="font-13"><%= v.status %></span></h4>
                                    <h4 class="header-title m-t-0">Created At: <span class="font-13"><%= data?.createdAt %></span></h4>
                                </div>
                            <% }) %>
                        <% } else{ %>
                            <span class="col-sm-3 font-13">N/A</span>
                        <% } %>

                    </div>

                    <div class="col-lg-12 mt-4">
                        <h5 class="text-custom m-b-5"> TAXI BOOKING RATING & REVIEW </h5>
                        <%if (data?.rating_review) { %>
                        <div class="card-box ribbon-box">
                            <div class="ribbon ribbon-primary"><%= data?.rating_review?.rating || '' %>&#11088;</div>
                            <p class="m-b-0"><%= data?.rating_review?.review || '' %></p>
                        </div>
                        <% } else{ %>
                            <span class="col-sm-3 font-13">N/A</span>
                        <% } %>  
                    </div>

                    <h2 class="header-title m-t-4">TAXI DRIVER DETAIL</h2>
                    <div class="row">
                        <div class="col-sm-3">
                            <div class="text-center card-box">
                                <div class="clearfix"></div>
                                <div class="member-card">
                                    <div class="thumb-xl member-thumb m-b-10 mx-auto">
                                        <img src="<%= data?.user?.image %>" class="rounded-circle img-thumbnail" alt="profile-image">
                                    </div>
                                    <div class="">
                                        <h4 class="m-b-5 font-18"><%= data?.driver?.first_name || '' %> <%= data?.driver?.last_name || '' %></h4>
                                        <p class="text-muted m-b-0"><span class="text-pink"> <%= data?.driver?.email || '' %> </span> </p>
                                        <p class="text-muted"> <%= data?.driver?.country_code +' '+ data?.driver?.mobile_no || '' %> </p>
                                    </div>
                                    <p class="text-muted font-13"> <%= data?.driver?.city || '' %>, <%= data?.driver?.state || '' %>, <%= data?.driver?.country || '' %> </p>
                                    <b>TAXI DRIVER</b>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-9">
                            <h5 class="text-custom m-b-5"> TAXI DETAIL </h5>
                            <h4 class="header-title m-t-0">Taxi Registration Number: <span class="font-13"><%= data?.driver?.taxi_driver_business_detail?.registration_no %></span></h4>
                            <h4 class="header-title m-t-0">Location: <span class="font-13"><%= data?.driver?.taxi_driver_business_detail?.location %></span></h4>
                            <h4 class="header-title m-t-0">Driving Area Radius: <span class="font-13"><%= data?.driver?.taxi_driver_business_detail?.driving_area_radius %> (KM)</span></h4>
                            <h4 class="header-title m-t-0">License Number: <span class="font-13"><%= data?.driver?.taxi_driver_business_detail?.license_no %></span></h4>
                            <h4 class="header-title m-t-0">License Expiry Date: <span class="font-13"><%= data?.driver?.taxi_driver_business_detail?.license_expiry_date %></span></h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>